---
nav:
  title: é—®é¢˜
  path: /intro
  order: 2
---

# ðŸ¼React.memo

æ ¹æ®ä¸Šè¿°æƒ…å†µï¼ŒReact æä¾›äº†ä¸€ç§æ›´ç¬¦åˆä½¿ç”¨ä¹ æƒ¯çš„ä¼˜åŒ–æ–¹å¼ï¼Œé‚£å°±æ˜¯ React.memoï¼Œè¿™ä¸ª API çš„ä½œç”¨å°±æ˜¯è®©ç»„ä»¶å˜æˆä¸€ä¸ªçº¯ç»„ä»¶ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æžœç»„ä»¶çš„ props æ²¡æœ‰å˜åŒ–ï¼Œé‚£ä¹ˆå°±ä¸ä¼šé‡æ–°æ¸²æŸ“ã€‚

è™½ç„¶`React.memo`å¯ä»¥ä¼˜åŒ–ç»„ä»¶æ€§èƒ½ï¼Œä½†æ˜¯å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œå³ä¾¿ä¸åšä»»ä½•ä¼˜åŒ–ï¼ŒReact çš„æ€§èƒ½ä¹Ÿæ˜¯è¶³å¤Ÿçš„ã€‚å› æ­¤å¯¹äºŽç®€å•ç»„ä»¶å’Œ props å¸¸å˜çš„ç»„ä»¶ï¼Œé€šå¸¸ä¸éœ€è¦ä½¿ç”¨ memoã€‚

é™¤äº†ä¸Šè¿°æåˆ°çš„åŽŸå› ï¼Œä¸å¸¸ä½¿ç”¨ memo çš„å¦ä¸€ä¸ªåŽŸå› æ˜¯ React.memo å¾ˆå®¹æ˜“è¢«â€œç ´åâ€

`memo`ä¼šåœ¨å‘çŽ°ç»„ä»¶éœ€è¦é‡æ–°æ¸²æŸ“çš„æ—¶å€™ï¼Œå…ˆåŽ» check ä¸€éç»„ä»¶çš„`props`æ˜¯å¦å˜åŒ–ï¼Œ`React`å°†ä½¿ç”¨`Object.is`ï¼ˆæµ…æ¯”è¾ƒï¼‰æ¯”è¾ƒã€Œæ¯ä¸ª propã€ã€‚å¦‚æžœå®ƒä»¬æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œå°±å¯ä»¥è·³è¿‡é‡æ–°æ¸²æŸ“ã€‚

`å‡½æ•°`ã€`å¯¹è±¡`å’Œ`æ•°ç»„`ç­‰éžåŸºæœ¬æ•°æ®ç±»åž‹ï¼Œå®ƒä»¬æ˜¯å­˜åœ¨å †ä¸­çš„ï¼Œä¹Ÿå°±æ˜¯åœ¨å¼•ç”¨å®ƒä»¬çš„æ—¶å€™ï¼Œæˆ‘ä»¬åªæ˜¯å¼•ç”¨äº†å®ƒå­˜åœ¨å †ä¸­çš„åœ°å€ï¼ˆ`æŒ‡é’ˆ`ï¼‰ï¼Œå› æ­¤å¯¹äºŽ prop ä¸­å‡ºçŽ°ä¸Šè¿°æƒ…å†µï¼Œå®žé™…æ¯”è¾ƒæ˜¯ä¸å‡†ç¡®çš„ã€‚

è§£å†³æ–¹æ¡ˆæ˜¯è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°ï¼Œé€šè¿‡ `React.memo` çš„ç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥ï¼Œå¯ä»¥å®žçŽ°æ›´å¤æ‚çš„æ¯”è¾ƒé€»è¾‘ã€‚

```yml
import React from 'react';

const MyComponent = React.memo( (props) => { /* ç»„ä»¶é€»è¾‘ */ }, (prevProps, nextProps) => { // è‡ªå®šä¹‰æ¯”è¾ƒé€»è¾‘ return prevProps.someProp === nextProps.someProp; } );

export default MyComponent;
```

ä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯ï¼š å¯¹äºŽå¤æ‚çš„æ¯”è¾ƒé€»è¾‘ï¼Œå¯èƒ½ä¼šå¯¼è‡´é¢å¤–çš„æ€§èƒ½å¼€é”€ï¼Œç‰¹åˆ«æ˜¯åœ¨é¢‘ç¹æ›´æ–°çš„ç»„ä»¶ä¸­ã€‚

ç»¼ä¸Šæ‰€è¿°ï¼Œå¯ä»¥çŸ¥é“åœ¨å¤§åž‹ç»„ä»¶æ ‘ä¸­ï¼ŒæŸäº›å­ç»„ä»¶ä¸éœ€è¦æ¯æ¬¡çˆ¶ç»„ä»¶æ¸²æŸ“çš„æ—¶å€™éƒ½é‡æ–°æ¸²æŸ“ï¼Œè¿™æ—¶å€™æ˜¯ä½¿ç”¨ React.memo çš„æ—¶æœºï¼š

```tsx

import React, { useState } from 'react';

// åˆ—è¡¨é¡¹ç»„ä»¶ï¼Œä½¿ç”¨ React.memo
const ListItem = React.memo(({ item }) => {
  console.log(`Rendering ListItem: ${item}`);

  return <div style={{ padding: '5px', border: '1px solid #ccc', margin: '5px' }}>{item}</div>;
});

// åˆ—è¡¨ç»„ä»¶
const List = ({ items }) => {
  console.log('Rendering List');

  return (
    <div>
      {items.map((item) => (
        <ListItem key={item} item={item} />
      ))}
    </div>
  );
};

// ä¸»åº”ç”¨ç»„ä»¶
const App = () => {
  const [count, setCount] = useState(0);
  const [items] = useState(['Item 1', 'Item 2', 'Item 3']);

  return (
    <div>
      <h1>Counter: {count}</h1>
      <button onClick={() => setCount(count + 1)}>Increment</button>

      <h2>List</h2>
      <List items={items} />
    </div>
  );
};

export default App;

```
